KISSY.add("brix/gallery/dialog/index",function(a,b,c){function d(a,b){var c={up:['<div class="popup popup-up">','<div class="popup-left"></div>','<div class="popup-center">','<div class="popup-content">'+a+"</div>","</div>",'<div class="popup-right"></div>','<div class="popup-bottom">','<div class="popup-bottom-left"></div>','<div class="popup-bottom-center">&nbsp;</div>','<div class="popup-bottom-right"></div>',"</div>","</div>"],right:['<div class="popup-h popup-h-right">','<div class="popup-h-top"></div>','<div class="popup-h-center">','<div class="popup-h-body">','<div class="popup-content">'+a+"</div>","</div>","</div>",'<div class="popup-h-bottom"></div>',"</div>"]};return c.down=c.up.slice(0),c.down[0]=c.down[0].replace("popup-up",""),c.left=c.right.slice(0),c.left[0]=c.left[0].replace("popup-h-right",""),c[b].join("")}function e(a,b){switch(b){case"up":case"down":if(a<320)return 320;break;case"left":case"right":if(a<145)return 145}return a}function f(a){var b=this;f.superclass.constructor.apply(this,arguments)}return f.ATTRS={start:{value:{left:600,top:100,opacity:0}},end:{value:{left:100,top:100,opacity:1}},x:{getter:function(){var a=this;return a.get("start").left}},y:{getter:function(){var a=this;return a.get("start").top}},dir:{getter:function(){var a=this,b="",c=a.get("start"),d=a.get("end");return b=c.left===d.left&&(c.top<d.top?"down":"up")||c.top===d.top&&(c.left<d.left?"right":"left")||"left",b}},width:{valueFn:function(a){if(!a)return a;var b=this,c=b.get("dir");return e(a,c)},setter:function(a){var b=this,c=b.get("dir");return e(a,c)}},elCls:{valueFn:function(){return"dialog-"+this.get("dir")}},prefixCls:{value:"ux-"},duration:{value:.3},easing:{value:"easeOut"},closable:{value:!0},mask:{value:!1},content:{valueFn:function(a){return d("",this.get("dir"))},setter:function(a){return d(a,this.get("dir"))}},tmpl:{value:null},data:{}},a.extend(f,c,{initializer:function(){var a=this;a.on("afterRenderUI",function(){a.get("tmpl")&&(a.pagelet=new b({container:a.get("contentEl").one(".popup-content"),autoRender:!0,tmpl:a.get("tmpl"),data:a.get("data")}),a.pagelet.addBehavior())})},_visibilityChange:function(b,c){var d=this,e=d.get("el"),f=a.one("body"),g="start";e.stop(),e.css("visibility","visible"),b?(e.css(d.get("start")),g="end"):(e.css(d.get("end")),g="start"),f.css({width:f.width(),height:f.height(),overflow:"hidden"}),e.animate(d.get(g),d.get("duration"),d.get("easing"),function(){e.css("visibility",b?"visible":"hidden"),b||e.css({left:"-99999px",top:"-99999px"}),f.css({width:"",height:"",overflow:""}),c&&c.call(d)})},bindUI:function(){var a=this;a.on("beforeVisibleChange",function(b){var c=b.newVal;if(!c)return a._visibilityChange(c,function(){a.get("el").css("visibility","hidden"),a.set("visible",!1,{silent:!0}),a.fire("hide")}),!1}),a.on("afterVisibleChange",function(b){var c=b.newVal;c&&a._visibilityChange(c)})}}),f},{requires:["brix/core/pagelet","overlay","./dialog.css"]});